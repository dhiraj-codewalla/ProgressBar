<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="progress-bar-container">
      <div id="progress-bar">
        <div id="toast">
          <div id="draggable-handle">
            <img id="emoji"  src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Dotted%20Line%20Face.png"  width="25" height="25"></img>
          </div>
        </div>
      </div>
      <div id="rating-container">
        <p id="rating-text">Rating is shown here...</p>
      </div>
    </div>

    <script>
      //Constat decleration
      const progressBar = document.getElementById("progress-bar");
      const draggableHandle = document.getElementById("draggable-handle");
      const emojiImg = document.getElementById("emoji");
      const ratingText = document.getElementById("rating-text");
      const toastContainer = document.getElementById("toast");

      let isDragging = false;

      //method to handle when user presses on emoji and move the mouse.
      draggableHandle.addEventListener("mousedown", (e) => {
        e.preventDefault();
        isDragging = true;

        document.addEventListener("mousemove", handleDrag);
        document.addEventListener("mouseup", () => {
          isDragging = false;
          document.removeEventListener("mousemove", handleDrag);
        });
      });

      //user can press on progressBar pointer and then can move to anywhere with pressed mouse.
      function handleDrag(e) {
        if (isDragging) {
          const { left, width } = progressBar.getBoundingClientRect();
          let newX = e.clientX - left;
          const restrictedWidth = width - 25;

          // to handle stays within the bounds of the progress bar
          newX = Math.max(0, Math.min(newX, width));

          //progress bar pointer shift.
          draggableHandle.style.left = `${newX}px`;

          // progress bar toast shift.
          toastContainer.style.width = `${newX}px`;

          // Calculate the progress level
          const progressLevel = Math.floor((newX / width) * 5);
          ratingText.innerText = `You gave the rating ${progressLevel}`;
          // Update the emoji based on the progress level
          updateEmoji(progressLevel);
        }
      }

      // Emoji strucure :
      // No response till : üòê
      // 0 - 1 : angry
      // 1 - 2 : Sad/concerned
      // 2 - 3 : neutral
      // 3-4 : happy
      // 4-5 : good
      // 5+ : very good.

      function updateEmoji(level) {
        switch (level) {
          case 0:
            // emojiSpan.textContent = "üò°";
            emojiImg.src = "https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Angry%20Face.png"
            
            break;
          case 1:
            // emojiSpan.textContent = "üòü";
            emojiImg.src = "https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Disappointed%20Face.png"
            break;
          case 2:
            // "üòä"; 
            emojiImg.src = "https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Face%20Savoring%20Food.png"
            break;
          case 3:
              // "üòÄ";
            emojiImg.src = "https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Grinning%20Face.png"
              break;
          case 4:
                //  "üòÉ";
            emojiImg.src = "https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Grinning%20Face%20with%20Big%20Eyes.png"
                break;
          case 5:
                  //  "üòÅ";
            emojiImg.src = "https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Beaming%20Face%20with%20Smiling%20Eyes.png"
                  break;
          default:
            //  "üòê";
            emojiImg.src = "https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Grinning%20Face%20with%20Sweat.png"
            break;
        }
      }
    </script>
  </body>
</html>

<!--

  angry faceb : 0 
  <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Angry%20Face.png" alt="Angry Face" width="25" height="25" />


  dissapoint : 1

  <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Disappointed%20Face.png" alt="Disappointed Face" width="25" height="25" />

  don't know 

  <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Dotted%20Line%20Face.png" alt="Dotted Line Face" width="25" height="25" />

  2 : 

  <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Face%20Savoring%20Food.png" alt="Face Savoring Food" width="25" height="25" />

  3 : 

  <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Grinning%20Face.png" alt="Grinning Face" width="25" height="25" />

  4 : 
  <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Grinning%20Face%20with%20Big%20Eyes.png" alt="Grinning Face with Big Eyes" width="25" height="25" />

  <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Face%20with%20Diagonal%20Mouth.png" alt="Face with Diagonal Mouth" width="25" height="25" />


  5 : 

  <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Beaming%20Face%20with%20Smiling%20Eyes.png" alt="Beaming Face with Smiling Eyes" width="25" height="25" />

-->
